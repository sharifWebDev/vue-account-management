import{_ as U,z as F,r as p,g as W,A as G,x as Q,B as q,c as n,o as l,a as e,p as b,C as H,k as _,l as J,v as K,D as r,j as i,n as d,F as A,b as O,t as u,E as X,s as P,G as B}from"./index-KFYn9TiH.js";const Y={class:"mb-4"},Z={class:"flex justify-between items-center"},tt={class:"bg-white dark:bg-gray-800 p-3 rounded-lg dark:border dark:border-gray-700"},et={class:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-4 gap-4"},st={class:"flex flex-col sm:flex-row gap-3 w-full lg:w-auto"},at={class:"relative flex-grow max-w-md"},rt={key:0,class:"text-center py-12"},ot={key:1,class:"bg-white dark:bg-gray-700 rounded-lg shadow overflow-hidden"},nt={class:"overflow-x-auto"},lt={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},it={class:"bg-gray-50 dark:bg-gray-800"},dt={key:1,class:"fas ml-1 fa-sort text-gray-300"},ct={key:1,class:"fas ml-1 fa-sort text-gray-300"},ut={key:1,class:"fas ml-1 fa-sort text-gray-300"},gt={key:1,class:"fas ml-1 fa-sort text-gray-300"},xt={key:1,class:"fas ml-1 fa-sort text-gray-300"},yt={key:1,class:"fas ml-1 fa-sort text-gray-300"},pt={key:1,class:"fas ml-1 fa-sort text-gray-300"},mt={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},ft={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},bt={class:"px-6 py-3 whitespace-nowrap"},kt={class:"text-sm font-medium text-gray-900 dark:text-white"},vt={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300"},ht={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300"},wt={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300"},_t={class:"px-6 py-3 whitespace-nowrap"},Ct={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300"},Dt={class:"px-6 py-3 whitespace-nowrap text-right text-sm font-medium space-x-2"},At=["onClick","disabled"],Pt=["onClick","disabled"],Bt={key:0,class:"h-[55vh] hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},Nt={key:2,class:"mt-6"},Tt={class:"px-6 py-3"},$t={class:"text-center"},Rt={class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},St={class:"flex justify-center space-x-3"},jt=["disabled"],Mt=["disabled"],Et={key:0},It={key:1},Vt={class:"px-6 py-3"},Lt={class:"text-center"},zt={class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},Ut={class:"flex justify-center space-x-3"},Ft=["disabled"],Wt=["disabled"],Gt={key:0},Qt={key:1},qt={__name:"AccountTrash",setup(Ht){const s=F(),k=p(!1),v=p(!1),m=p(null),f=p(null),g=p("");let x=null;const C=p(!1),D=W(()=>s.items||[]),N=a=>{var t;return(t=s.pagination)!=null&&t.from&&s.pagination.from>0?s.pagination.from+a:(s.pagination.current_page-1)*s.pagination.per_page+a+1},T=a=>{if(!a)return"";try{return new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return a}},$=()=>{x&&clearTimeout(x),x=setTimeout(async()=>{await c()},500)},R=()=>{g.value="",c()},c=async(a={})=>{try{typeof s.trashed=="function"?await s.trashed({search:g.value,...a}):await s.get({trash:"trash",search:g.value,...a})}catch(t){console.error("Error loading trashed accounts:",t)}};G(g,a=>{a===""&&(x&&clearTimeout(x),c())}),Q(async()=>{C.value||(s.reset(),await c(),C.value=!0)});const S=a=>{m.value=a,k.value=!0},j=a=>{f.value=a,v.value=!0},h=()=>{k.value=!1,m.value=null},w=()=>{v.value=!1,f.value=null},M=async()=>{if(m.value)try{const a=await s.restore(m.value.id);a&&a.success&&(h(),await c())}catch(a){console.error("Error restoring account:",a)}},E=async()=>{if(f.value)try{const a=await s.forceDelete(f.value.id);a&&a.success&&(w(),await c())}catch(a){console.error("Error permanently deleting account:",a)}},I=async a=>{await s.changePerPage(a),await c()},V=async a=>{await s.paginate(a),await c()},y=async a=>{const t=s.sortDirection==="asc"?"desc":"asc";await s.sort(a,t),await c()};return q(()=>{x&&clearTimeout(x)}),(a,t)=>(l(),n(A,null,[e("div",Y,[e("div",Z,[t[8]||(t[8]=e("div",null,[e("h1",{class:"text-lg font-semibold text-gray-700 dark:text-white"},"Deleted Accounts")],-1)),b(H)])]),e("div",tt,[e("div",et,[t[11]||(t[11]=e("div",null,null,-1)),e("div",st,[e("div",at,[J(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>g.value=o),onInput:$,type:"text",placeholder:"Search by account name or number...",class:"w-full pl-10 pr-10 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-1 focus:ring-gray-500 focus:border-gray-500 outline-none transition-all focus:shadow-sm"},null,544),[[K,g.value]]),t[10]||(t[10]=e("div",{class:"absolute left-3 top-2.5 text-gray-400"},[e("i",{class:"fas fa-search text-base"})],-1)),g.value?(l(),n("button",{key:0,onClick:R,class:"absolute right-2 top-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors"},[...t[9]||(t[9]=[e("i",{class:"fas fa-times text-sm"},null,-1)])])):_("",!0)])])]),r(s).loading&&r(s).items.length===0?(l(),n("div",rt,[...t[12]||(t[12]=[e("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-gray-600"},null,-1),e("p",{class:"mt-4 text-gray-600 dark:text-gray-400"},"Loading deleted accounts...",-1)])])):(l(),n("div",ot,[e("div",nt,[e("table",lt,[e("thead",it,[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[1]||(t[1]=o=>y("id"))},[t[13]||(t[13]=i(" SL ",-1)),r(s).sortBy==="id"?(l(),n("i",{key:0,class:d(["fas ml-1",r(s).sortDirection==="asc"?"fa-sort-up":"fa-sort-down"])},null,2)):(l(),n("i",dt))]),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer",onClick:t[2]||(t[2]=o=>y("account_name"))},[t[14]||(t[14]=i(" Account Name ",-1)),r(s).sortBy==="account_name"?(l(),n("i",{key:0,class:d(["fas ml-1",r(s).sortDirection==="asc"?"fa-sort-up":"fa-sort-down"])},null,2)):(l(),n("i",ct))]),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer",onClick:t[3]||(t[3]=o=>y("account_number"))},[t[15]||(t[15]=i(" Account Number ",-1)),r(s).sortBy==="account_number"?(l(),n("i",{key:0,class:d(["fas ml-1",r(s).sortDirection==="asc"?"fa-sort-up":"fa-sort-down"])},null,2)):(l(),n("i",ut))]),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer",onClick:t[4]||(t[4]=o=>y("bank_name"))},[t[16]||(t[16]=i(" Bank Name ",-1)),r(s).sortBy==="bank_name"?(l(),n("i",{key:0,class:d(["fas ml-1",r(s).sortDirection==="asc"?"fa-sort-up":"fa-sort-down"])},null,2)):(l(),n("i",gt))]),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer",onClick:t[5]||(t[5]=o=>y("branch_name"))},[t[17]||(t[17]=i(" Branch Name ",-1)),r(s).sortBy==="branch_name"?(l(),n("i",{key:0,class:d(["fas ml-1",r(s).sortDirection==="asc"?"fa-sort-up":"fa-sort-down"])},null,2)):(l(),n("i",xt))]),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[6]||(t[6]=o=>y("status"))},[t[18]||(t[18]=i(" Status ",-1)),r(s).sortBy==="status"?(l(),n("i",{key:0,class:d(["fas ml-1",r(s).sortDirection==="asc"?"fa-sort-up":"fa-sort-down"])},null,2)):(l(),n("i",yt))]),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[7]||(t[7]=o=>y("deleted_at"))},[t[19]||(t[19]=i(" Deleted Date ",-1)),r(s).sortBy==="deleted_at"?(l(),n("i",{key:0,class:d(["fas ml-1",r(s).sortDirection==="asc"?"fa-sort-up":"fa-sort-down"])},null,2)):(l(),n("i",pt))]),t[20]||(t[20]=e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ",-1))])]),e("tbody",mt,[(l(!0),n(A,null,O(D.value,(o,L)=>(l(),n("tr",{key:o.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},[e("td",ft,u(N(L)),1),e("td",bt,[e("div",kt,u(o.account_name),1)]),e("td",vt,u(o.account_number),1),e("td",ht,u(o.bank_name||"N/A"),1),e("td",wt,u(o.branch_name||"N/A"),1),e("td",_t,[e("span",{class:d([o.status===1||o.status===!0?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300","px-2.5 py-1 inline-flex text-xs leading-5 font-semibold rounded-full"])},u(o.status===1||o.status===!0?"Active":"Inactive"),3)]),e("td",Ct,u(T(o.deleted_at)||"N/A"),1),e("td",Dt,[e("button",{onClick:z=>S(o),disabled:r(s).loading,class:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 p-1 rounded bg-green-50 hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Restore"},[...t[21]||(t[21]=[e("i",{class:"fas fa-undo"},null,-1)])],8,At),e("button",{onClick:z=>j(o),disabled:r(s).loading,class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 p-1 rounded bg-red-50 hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors dark:bg-gray-500 disabled:opacity-50 disabled:cursor-not-allowed",title:"Permanently Delete"},[...t[22]||(t[22]=[e("i",{class:"fas fa-trash"},null,-1)])],8,Pt)])]))),128)),D.value.length===0&&!r(s).loading?(l(),n("tr",Bt,[...t[23]||(t[23]=[e("td",{colspan:"8",class:"px-6 py-12 text-center"},[e("div",{class:"text-gray-500 dark:text-gray-400"},[e("i",{class:"fas fa-inbox text-3xl mb-4"}),e("p",{class:"text-lg font-medium"},"No deleted accounts found")])],-1)])])):_("",!0)])])])])),r(s).pagination.total>0?(l(),n("div",Nt,[b(X,{"total-items":r(s).pagination.total,"per-page":r(s).pagination.per_page,"current-page":r(s).pagination.current_page,"last-page":r(s).pagination.last_page,onChangePage:V,onChangePerPage:I},null,8,["total-items","per-page","current-page","last-page"])])):_("",!0)]),b(B,{show:k.value,title:"Restore Account",maxWidth:"lg",onClose:h},{default:P(()=>{var o;return[e("div",Tt,[e("div",$t,[t[26]||(t[26]=e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900 mb-4"},[e("i",{class:"fas fa-undo text-green-600 dark:text-green-300 text-xl"})],-1)),t[27]||(t[27]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"Restore Account",-1)),e("p",Rt,[t[24]||(t[24]=i(" Are you sure you want to restore ",-1)),e("strong",null,u((o=m.value)==null?void 0:o.account_name),1),t[25]||(t[25]=i("? ",-1))])]),e("div",St,[e("button",{onClick:h,disabled:r(s).loading,class:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}," Cancel ",8,jt),e("button",{onClick:M,disabled:r(s).loading,class:d(["px-4 py-2 rounded-lg text-sm font-medium text-white transition-colors",r(s).loading?"bg-green-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"])},[r(s).loading?(l(),n("span",Et,[...t[28]||(t[28]=[e("i",{class:"fas fa-spinner fa-spin mr-2"},null,-1),i(" Restoring... ",-1)])])):(l(),n("span",It,"Restore Account"))],10,Mt)])])]}),_:1},8,["show"]),b(B,{show:v.value,title:"Permanently Delete Account",maxWidth:"lg",onClose:w},{default:P(()=>{var o;return[e("div",Vt,[e("div",Lt,[t[33]||(t[33]=e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900 mb-4"},[e("i",{class:"fas fa-exclamation-triangle text-red-600 dark:text-red-300 text-xl"})],-1)),t[34]||(t[34]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"Permanently Delete Account",-1)),e("p",zt,[t[29]||(t[29]=i(" Are you sure you want to permanently delete ",-1)),e("strong",null,u((o=f.value)==null?void 0:o.account_name),1),t[30]||(t[30]=i("? This action ",-1)),t[31]||(t[31]=e("span",{class:"font-bold text-red-600"},"cannot",-1)),t[32]||(t[32]=i(" be undone and will remove the account from the system completely. ",-1))])]),e("div",Ut,[e("button",{onClick:w,disabled:r(s).loading,class:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}," Cancel ",8,Ft),e("button",{onClick:E,disabled:r(s).loading,class:d(["px-4 py-2 rounded-lg text-sm font-medium text-white transition-colors",r(s).loading?"bg-red-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700"])},[r(s).loading?(l(),n("span",Gt,[...t[35]||(t[35]=[e("i",{class:"fas fa-spinner fa-spin mr-2"},null,-1),i(" Deleting... ",-1)])])):(l(),n("span",Qt,"Delete Permanently"))],10,Wt)])])]}),_:1},8,["show"])],64))}},Kt=U(qt,[["__scopeId","data-v-7dee740e"]]);export{Kt as default};
