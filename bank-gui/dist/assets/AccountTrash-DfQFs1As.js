import{_ as Q,r as g,B as q,C as O,D as X,E as Y,g as h,G as Z,x as ee,c as i,o as n,a as e,p,H as te,k as b,l as ae,v as se,d as k,I as o,J as oe,T as N,F as T,b as re,t as d,K as ne,s as B,j as u,n as R,L as I}from"./index-DcqL_gPq.js";const le={class:"mb-4"},de={class:"flex justify-between items-center"},ie={class:"bg-white dark:bg-gray-800 p-3 rounded-lg dark:border dark:border-gray-700"},ce={class:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-4 gap-4"},ue={class:"flex flex-col sm:flex-row gap-3 w-full lg:w-auto"},ge={class:"relative flex-grow max-w-md"},me={class:"bg-white dark:bg-gray-700 rounded-lg shadow overflow-hidden"},ye={class:"overflow-x-auto"},xe={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700 relative"},he={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},pe={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},be={class:"px-6 py-3 whitespace-nowrap"},fe={class:"text-sm font-medium text-gray-900 dark:text-white"},ve={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},we={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300"},_e={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300"},ke={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300"},Ae={class:"px-6 py-3 whitespace-nowrap"},De={class:"px-2.5 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"},Ce={class:"px-6 py-3 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300"},Pe={class:"px-6 py-3 whitespace-nowrap text-right text-sm font-medium space-x-2"},Se=["onClick","disabled"],Ne=["onClick","disabled"],Te={key:0,class:"mt-6"},Be={class:"px-6 py-3"},Re={class:"text-center"},Ie={class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},Me={class:"flex justify-center space-x-3"},je=["disabled"],Ee=["disabled"],Le={key:0},Ve={key:1},$e={class:"px-6 py-3"},Fe={class:"text-center"},Ue={class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},We={class:"flex justify-center space-x-3"},ze=["disabled"],Ge=["disabled"],He={key:0},Je={key:1},Ke={__name:"AccountTrash",setup(Qe){const M=g([{key:"account_name",label:"Account Name",sortable:!0,width:"200px"},{key:"account_number",label:"Account Number",sortable:!0,width:"200px"},{key:"bank_name",label:"Bank Name",sortable:!0},{key:"branch_name",label:"Branch Name",sortable:!0},{key:"status",label:"Status",sortable:!0,width:"100px"},{key:"deleted_at",label:"Deleted At",sortable:!0,width:"200px"}]),a=q(),A=O(),D=X(),C=Y(),f=g(!1),v=g(!1),m=g(null),y=g(null),l=g("");let x=null;const j=h(()=>a.items||[]);h(()=>A.items||[]),h(()=>(D.items||[]).filter(t=>t!=null)),h(()=>(C.items||[]).filter(t=>t!=null));const E=s=>a.currentPage&&a.perPage?(a.currentPage-1)*a.perPage+s+1:s+1,P=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",S=()=>{x&&clearTimeout(x),x=setTimeout(async()=>{const s=l.value||"";await a.trashed({search:s})},500)},L=()=>{l.value="",c()};Z(l,s=>{s===""&&(x&&clearTimeout(x),a.trashed({search:""})),S()}),ee(async()=>{await c(),V()});const V=()=>{A.getAll(),D.getAll(),C.getAll()},c=async(s="")=>{try{await a.trashed(s)}catch(t){console.error("Error loading trashed accounts:",t)}},$=s=>{m.value=s,f.value=!0},w=()=>{f.value=!1,m.value=null},F=async()=>{if(m.value)try{const s=await a.restore(m.value.id);s&&s.success&&(w(),await c())}catch(s){console.error("Error restoring account:",s)}},U=s=>{y.value=s,v.value=!0},_=()=>{v.value=!1,y.value=null},W=async()=>{if(y.value)try{const s=await a.forceDelete(y.value.id);s&&s.success&&(_(),await c())}catch(s){console.error("Error permanently deleting account:",s)}},z=async s=>{await a.changePerPage(s),await c(l.value)},G=async s=>{await a.paginate(s),await c(l.value)},H=async s=>{const t=a.sortDirection==="asc"?"desc":"asc";await a.sort(s,t),await c(l.value)};return(s,t)=>(n(),i(T,null,[e("div",le,[e("div",de,[t[1]||(t[1]=e("div",null,[e("h1",{class:"text-lg font-semibold text-gray-700 dark:text-white"},"Deleted Accounts"),e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Manage permanently deleted accounts or restore them")],-1)),p(te)])]),e("div",ie,[e("div",ce,[t[3]||(t[3]=e("div",null,[e("h6",null,"Deleted Accounts")],-1)),e("div",ue,[e("div",ge,[ae(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>l.value=r),onInput:S,type:"search",placeholder:"Search deleted accounts...",class:"w-full pl-4 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-0 focus:border-gray-400 dark:bg-gray-700 dark:text-white"},null,544),[[se,l.value]]),t[2]||(t[2]=e("div",{class:"absolute left-3 top-2.5 text-gray-400"},[e("i",{class:"fas fa-search text-base"})],-1))])])]),e("div",me,[e("div",ye,[e("table",xe,[p(oe,{columns:M.value,"sort-by":o(a).sortBy,"sort-direction":o(a).sortDirection,"show-actions-column":!0,"show-sl-column":!0,onSort:H},null,8,["columns","sort-by","sort-direction"]),o(a).loading?(n(),k(N,{key:0,"is-loading":!0,"total-items":o(a).totalItems,"item-name":"accounts","loading-text":"Loading deleted accounts...","loading-subtext":"Fetching your deleted account data"},null,8,["total-items"])):b("",!0),e("tbody",he,[o(a).items.length===0?(n(),k(N,{key:0,"is-loading":!1,isEmpty:!0,"has-search":!!l.value,"item-name":"deleted accounts","empty-icon":"fas fa-trash","empty-title":"No deleted accounts","empty-message":l.value?"No deleted accounts match your search criteria.":"There are no deleted accounts to display.",onClearSearch:L},null,8,["has-search","empty-message"])):(n(!0),i(T,{key:1},re(j.value,(r,J)=>(n(),i("tr",{key:r.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},[e("td",pe,d(E(J)),1),e("td",be,[e("div",fe,d(r.account_name),1),r.deleted_at?(n(),i("div",ve," Deleted: "+d(P(r.deleted_at)),1)):b("",!0)]),e("td",we,d(r.account_number),1),e("td",_e,d(r.bank_name||"N/A"),1),e("td",ke,d(r.branch_name||"N/A"),1),e("td",Ae,[e("span",De,d(r.deleted_at?"Deleted":"Active"),1)]),e("td",Ce,d(P(r.deleted_at)),1),e("td",Pe,[e("button",{onClick:K=>$(r),disabled:o(a).loading,class:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 p-1 rounded bg-green-50 hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Restore"},[...t[4]||(t[4]=[e("i",{class:"fas fa-undo"},null,-1)])],8,Se),e("button",{onClick:K=>U(r),disabled:o(a).loading,class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 p-1 rounded bg-red-50 hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors dark:bg-gray-500 disabled:opacity-50 disabled:cursor-not-allowed",title:"Permanently Delete"},[...t[5]||(t[5]=[e("i",{class:"fas fa-trash"},null,-1)])],8,Ne)])]))),128))])])])]),o(a).totalItems>0?(n(),i("div",Te,[o(a).totalItems>0?(n(),k(ne,{key:0,"total-items":o(a).totalItems,"per-page":o(a).perPage,"current-page":o(a).currentPage,"last-page":o(a).lastPage,"is-loading":o(a).isLoading,onChangePage:G,onChangePerPage:z},null,8,["total-items","per-page","current-page","last-page","is-loading"])):b("",!0)])):b("",!0)]),p(I,{show:f.value,title:"Restore Account",maxWidth:"lg",onClose:w},{default:B(()=>{var r;return[e("div",Be,[e("div",Re,[t[8]||(t[8]=e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900 mb-4"},[e("i",{class:"fas fa-undo text-green-600 dark:text-green-300 text-xl"})],-1)),t[9]||(t[9]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"Restore Account",-1)),e("p",Ie,[t[6]||(t[6]=u(" Are you sure you want to restore ",-1)),e("strong",null,d((r=m.value)==null?void 0:r.account_name),1),t[7]||(t[7]=u("? This will make the account active again in the system. ",-1))])]),e("div",Me,[e("button",{onClick:w,disabled:o(a).loading,class:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}," Cancel ",8,je),e("button",{onClick:F,disabled:o(a).loading,class:R(["px-4 py-2 rounded-lg text-sm font-medium text-white transition-colors",o(a).loading?"bg-green-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"])},[o(a).loading?(n(),i("span",Le,[...t[10]||(t[10]=[e("i",{class:"fas fa-spinner fa-spin mr-2"},null,-1),u(" Restoring... ",-1)])])):(n(),i("span",Ve,"Restore Account"))],10,Ee)])])]}),_:1},8,["show"]),p(I,{show:v.value,title:"Permanently Delete Account",maxWidth:"lg",onClose:_},{default:B(()=>{var r;return[e("div",$e,[e("div",Fe,[t[15]||(t[15]=e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900 mb-4"},[e("i",{class:"fas fa-exclamation-triangle text-red-600 dark:text-red-300 text-xl"})],-1)),t[16]||(t[16]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"Permanently Delete Account",-1)),e("p",Ue,[t[11]||(t[11]=u(" Are you sure you want to permanently delete ",-1)),e("strong",null,d((r=y.value)==null?void 0:r.account_name),1),t[12]||(t[12]=u("? This action ",-1)),t[13]||(t[13]=e("span",{class:"font-bold text-red-600"},"cannot",-1)),t[14]||(t[14]=u(" be undone and will remove the account from the system completely. ",-1))])]),e("div",We,[e("button",{onClick:_,disabled:o(a).loading,class:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}," Cancel ",8,ze),e("button",{onClick:W,disabled:o(a).loading,class:R(["px-4 py-2 rounded-lg text-sm font-medium text-white transition-colors",o(a).loading?"bg-red-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700"])},[o(a).loading?(n(),i("span",He,[...t[17]||(t[17]=[e("i",{class:"fas fa-spinner fa-spin mr-2"},null,-1),u(" Deleting... ",-1)])])):(n(),i("span",Je,"Delete Permanently"))],10,Ge)])])]}),_:1},8,["show"])],64))}},Oe=Q(Ke,[["__scopeId","data-v-6e683a2c"]]);export{Oe as default};
